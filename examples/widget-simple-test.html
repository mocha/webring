<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Widget Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            margin-bottom: 30px;
        }
        .content {
            min-height: 1000px; /* Make the page scrollable */
        }
        .debug-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            background: #333;
            color: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 10000;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            margin-right: 10px;
            margin-bottom: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <h1>Simple Widget Test</h1>

    <div class="debug-panel">
        <h3>Debug Controls</h3>
        <button onclick="checkWidget()">Check Widget</button>
        <button onclick="window.location.reload()">Reload Page</button>
        <button onclick="toggleType()">Toggle Type</button>
        <button onclick="forceWidgetVisible()">Force Widget Visible</button>
        <div id="status"></div>
    </div>
    
    <div class="content">
        <h2>Test Content</h2>
        <p>This is a simple test page for the webring widget. Scroll down to see more content.</p>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl.</p>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl.</p>
        
        <h2>More Content</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl.</p>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl. Nullam euismod, nisl eget aliquam ultricies, nunc nisl ultricies nunc, vitae ultricies nisl nisl vitae nisl.</p>
    </div>

    <script>
        // Simple status logging
        function log(message) {
            const status = document.getElementById('status');
            const logItem = document.createElement('div');
            logItem.textContent = message;
            status.appendChild(logItem);
            
            // Keep only the last 5 messages
            while (status.children.length > 5) {
                status.removeChild(status.firstChild);
            }
            
            // Also log to console
            console.log(message);
        }
        
        // Widget type toggling
        let currentType = 'bar';
        function toggleType() {
            currentType = currentType === 'bar' ? 'box' : 'bar';
            log(`Switched to ${currentType} widget`);
            
            // Reinitialize
            window.webring.init({
                type: currentType,
                siteUrl: "https://deuley.ltd",
                color: "#ff5500", 
                opacity: 1,
                slide_out: false // Always disable slide out for testing
            });
        }
        
        // Force widget to be visible
        function forceWidgetVisible() {
            const widget = document.getElementById('webring-widget');
            if (widget) {
                widget.style.position = 'fixed';
                widget.style.bottom = '0';
                widget.style.left = '0';
                widget.style.right = '0';
                widget.style.opacity = '1';
                widget.style.visibility = 'visible';
                widget.style.display = 'block';
                widget.style.transform = 'none';
                widget.style.zIndex = '99999';
                log('Widget visibility forced!');
            } else {
                log('Widget element not found');
            }
        }
        
        // Add load event listener
        window.addEventListener('load', function() {
            log('Page loaded, waiting for widget...');
            
            // Add force visibility button
            const debugPanel = document.querySelector('.debug-panel');
            const forceButton = document.createElement('button');
            forceButton.textContent = 'Force Widget Visible';
            forceButton.onclick = forceWidgetVisible;
            debugPanel.insertBefore(forceButton, document.getElementById('status'));
            
            // Check for widget after a slight delay
            setTimeout(() => {
                const widget = document.getElementById('webring-widget');
                log(`Widget detected: ${!!widget}`);
                
                if (widget) {
                    // Log widget properties
                    const style = window.getComputedStyle(widget);
                    log(`Widget position: ${style.position}`);
                    log(`Widget visible: ${style.display !== 'none' && style.visibility !== 'hidden'}`);
                    log(`Widget opacity: ${style.opacity}`);
                }
            }, 2000);
        });
    </script>
    
    <!-- Load debug helper first -->
    <script src="widget-debug-helper.js"></script>
    
    <!-- Then load the widget -->
    <script src="http://localhost:3000/widget.js"></script>
    <script>
        log('Initializing widget...');
        window.webring.init({
            type: "bar",
            siteUrl: "https://deuley.ltd",
            color: "#ff5500", // Bright color to make it obvious
            opacity: 1
        });
    </script>
</body>
</html> 